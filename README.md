# 实时聊天室网站

### 账号：test/test1，密码：123456

## [在线预览](https://chat.bro9.vip)

### 全局功能

- [x] 登录
- [x] 鉴权
- [ ] 禁言
- [x] 浏览器提示（标题闪烁）
- [x] 用户自定义头像
- [x] 用户自定义名称
- [x] 用户打开多窗口会断掉上一个链接
- [x] dify 智能客服 1.0
- [x] agno 智能客服 2.0

### 房间功能

- [x] 加入房间才连接
- [x] 切换房间
- [x] 分房间统计人数
- [x] 上划加载聊天记录
- [x] 气泡聊天样式
- [ ] 添加房间
- [x] 用户管理

### 技术栈：Vue + Flask + Redis + Mysql + Docker + Nginx + Certbot

- 使用 redis 对用户上下线与出入房间进行快速增删改查，实时记录状态
- 使用 jwt 对用户访问接口进行鉴权处理与访问时长限制
- 关于头像，使用的是对象存储公有读；为防止轮询用户 ID 爬取头像，使用 hmac 加密用户 ID 来命名头像
- 关于消息提醒，原本有一版是调用浏览器通知弹窗，但后为减少提示频率改为标签页闪烁
- 关于同浏览器多窗口，在 redis 中存储用户的连接信息，连接时验证，如果存在则断开之前的会话连接，以最新会话的为准
- 使用 dify 构建的智能客服，包含自然语言转 sql 功能与正常 ai 问答功能
- agno 构建的智能客服 2.0

![聊天界面](https://bro9-1327032498.cos.ap-nanjing.myqcloud.com/20250710175948.png)
![智能客服](https://bro9-1327032498.cos.ap-nanjing.myqcloud.com/%E6%99%BA%E8%83%BD%E5%AE%A2%E6%9C%8D.png)
